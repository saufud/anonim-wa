[build]
builder = "nixpacks"

[build.nixpacks]
providers = ["go"]

[build.nixpacks.phases.setup]
# Memastikan environment Go terinstall dengan benar
cmds = ["go version"]

[build.nixpacks.phases.build]
# Kuncinya ada di sini: arahkan ke ./cmd/server
cmds = ["go build -o app ./cmd/server"]

[deploy]
# Jalankan binary yang baru dibuat
startCommand = "./app"
